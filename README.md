# parking-lot-system
 THE PARKING LOT EXIT SYSTEM came as an idea to me after I myself faced a small issue one day when I went for shopping at the mall. Practically every man does get tired or has some commitments in case of emergency , therefore this system can serve as the best in such times.  The idea of the project is that the sensor would detect the presence of the vehicle in front of the exit gate and depending on that notify the in-charge to do the needful.  There are many other things that I can add to it like, Signaling the exit of the vehicle directed by the in-charge remotely or maybe controlling the barricade however, I couldn't get the logistics required for it considering the latest World.
Story
So basically , THE PARKING LOT EXIT SYSTEM came as an idea to me after I myself faced a small issue one day when I went for shopping at the mall.
Practically every man does get tired or has some commitments in case of emergency , therefore this system can serve as the best in such times.

The idea of the project is that the sensor would detect the presence of the vehicle in front of the exit gate and depending on that notify the in-charge to do the needful.

There are many other things that I can add to it like, Signaling the exit of the vehicle directed by the in-charge remotely or maybe controlling the barricade however, I couldn't get the logistics required for it considering the latest World.

WORKING
The minute the car comes in front of the LDR sensor, It detects low light and instantly sends message via the TWILIO account of the in-charge of the system .

This message is generated by using the Z-Score algorithm on puTTY .

The message generated helps the in-charge to collect the fixed payment and give appropriate directions to the barricade of the exit.
Barricade can also be designed easily however , I have only one WiFi Module and also that two products of different utility(Input/output) cannot be put into the BOLT at the same time.

COMPONENTS

{* Due to some problem I am not able to save the components in the given tab , so writing here}

1. BOLT WIFI MODULE - 1
2. 330 ohm RESISTOR - 1
3. LDR SENSOR - 1
4. microUSB - 1

SOFTWAREs USED : Twilio App

Schematics
Working
Here is a video on how the following idea works...
Message screenshot

Code
Z SCORE ANALYSISPython

import conf, json, time, math, statistics
from boltiot import Sms, Bolt
def compute_bounds(history_data,frame_size,factor):
    if len(history_data)<frame_size :
        return None

    if len(history_data)>frame_size :
        del history_data[0:len(history_data)-frame_size]
    Mn=statistics.mean(history_data)
    Variance=0
    for data in history_data :
        Variance += math.pow((data-Mn),2)
    Zn = factor * math.sqrt(Variance / frame_size)
    High_bound = history_data[frame_size-1]+Zn
    Low_bound = history_data[frame_size-1]-Zn
    return [High_bound,Low_bound]

mybolt = Bolt(conf.API_KEY, conf.DEVICE_ID)
sms = Sms(conf.SSID, conf.AUTH_TOKEN, conf.TO_NUMBER, conf.FROM_NUMBER)
history_data=[]

while True:
    response = mybolt.analogRead('A0')
    data = json.loads(response)
    if data['success'] != 1:
        print("There was an error while retriving the data.")
        print("This is the error:"+data['value'])
        time.sleep(10)
        continue

    print ("This is the value "+data['value'])
    sensor_value=0
    try:
        sensor_value = int(data['value'])
    except e:
        print("There was an error while parsing the response: ",e)
        continue

    bound = compute_bounds(history_data,conf.FRAME_SIZE,conf.MUL_FACTOR)
    if not bound:
        required_data_count=conf.FRAME_SIZE-len(history_data)
        print("Not enough data to compute Z-score. Need ",required_data_count," more data points")
        history_data.append(int(data['value']))
        time.sleep(10)
        continue

    try:
        if sensor_value > bound[0] :
            print ("The light level increased suddenly. Sending an SMS.")
            response = sms.send_sms("Awaiting customers...")
            print("This is the response ",response)
        elif sensor_value < bound[1]:
            print ("The light level decreased suddenly. Sending an SMS.")
            response = sms.send_sms("Customer requesting to drive thru")
            print("This is the response ",response)
        history_data.append(sensor_value);
    except Exception as e:
        print ("Error",e)
    time.sleep(10)
